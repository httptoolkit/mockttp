<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>RequestTransform | mockttp</title><meta name="description" content="Documentation for mockttp"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">mockttp</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">mockttp</a></li><li><a href="../modules/requestSteps.html">requestSteps</a></li><li><a href="requestSteps.RequestTransform.html">RequestTransform</a></li></ul><h1>Interface RequestTransform</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p>This defines the request transforms that we support for all passed through
requests (both HTTP and WebSockets).</p>
</div><div class="tsd-comment tsd-typography"></div></section><div class="tsd-signature"><span class="tsd-signature-keyword">interface </span><span class="tsd-kind-interface">RequestTransform</span> <span class="tsd-signature-symbol">{ </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.RequestTransform.html#matchReplaceBody">matchReplaceBody</a><span class="tsd-signature-symbol">?: </span><a href="../types/MatchReplacePairs.html" class="tsd-signature-type tsd-kind-type-alias">MatchReplacePairs</a><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.RequestTransform.html#matchReplaceHost">matchReplaceHost</a><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-symbol">{ </span><br/><span>        </span><span class="tsd-kind-property">replacements</span><span class="tsd-signature-symbol">: </span><a href="../types/MatchReplacePairs.html" class="tsd-signature-type tsd-kind-type-alias">MatchReplacePairs</a><span class="tsd-signature-symbol">; </span><br/><span>        </span><span class="tsd-kind-property">updateHostHeader</span><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><span class="tsd-signature-symbol">}</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.RequestTransform.html#matchReplacePath">matchReplacePath</a><span class="tsd-signature-symbol">?: </span><a href="../types/MatchReplacePairs.html" class="tsd-signature-type tsd-kind-type-alias">MatchReplacePairs</a><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.RequestTransform.html#matchReplaceQuery">matchReplaceQuery</a><span class="tsd-signature-symbol">?: </span><a href="../types/MatchReplacePairs.html" class="tsd-signature-type tsd-kind-type-alias">MatchReplacePairs</a><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.RequestTransform.html#patchJsonBody">patchJsonBody</a><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Operation</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.RequestTransform.html#replaceBody">replaceBody</a><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">Uint8Array</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">Buffer</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.RequestTransform.html#replaceBodyFromFile">replaceBodyFromFile</a><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.RequestTransform.html#replaceHeaders">replaceHeaders</a><span class="tsd-signature-symbol">?: </span><a href="Headers.html" class="tsd-signature-type tsd-kind-interface">Headers</a><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.RequestTransform.html#replaceHost">replaceHost</a><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-symbol">{ </span><br/><span>        </span><span class="tsd-kind-property">targetHost</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span><br/><span>        </span><span class="tsd-kind-property">updateHostHeader</span><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><span class="tsd-signature-symbol">}</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.RequestTransform.html#replaceMethod">replaceMethod</a><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.RequestTransform.html#setProtocol">setProtocol</a><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">&quot;http&quot;</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">&quot;https&quot;</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.RequestTransform.html#updateHeaders">updateHeaders</a><span class="tsd-signature-symbol">?: </span><a href="Headers.html" class="tsd-signature-type tsd-kind-interface">Headers</a><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.RequestTransform.html#updateJsonBody">updateJsonBody</a><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-symbol">{ </span><br/><span>        </span>[<span class="tsd-kind-index-signature">key</span>: <span class="tsd-signature-type">string</span>]<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><span class="tsd-signature-symbol">}</span><span class="tsd-signature-symbol">; </span><br/><span class="tsd-signature-symbol">}</span></div><section class="tsd-panel tsd-hierarchy"><h4>Hierarchy (<a href="../hierarchy.html#requestSteps.RequestTransform">view full</a>)</h4><ul class="tsd-hierarchy"><li><a href="PassThroughInitialTransforms.html" class="tsd-signature-type tsd-kind-interface">PassThroughInitialTransforms</a><ul class="tsd-hierarchy"><li><span class="target">RequestTransform</span></li></ul></li></ul></section><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/requests/request-step-definitions.ts#L534">rules/requests/request-step-definitions.ts:534</a></li></ul></aside><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><details class="tsd-index-content tsd-accordion" open><summary class="tsd-accordion-summary tsd-index-summary"><h5 class="tsd-index-heading uppercase" role="button" aria-expanded="false" tabIndex="0"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-chevronSmall"></use></svg> Index</h5></summary><div class="tsd-accordion-details"><section class="tsd-index-section"><h3 class="tsd-index-heading">Properties</h3><div class="tsd-index-list"><a href="requestSteps.RequestTransform.html#matchReplaceBody" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>match<wbr/>Replace<wbr/>Body?</span></a>
<a href="requestSteps.RequestTransform.html#matchReplaceHost" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>match<wbr/>Replace<wbr/>Host?</span></a>
<a href="requestSteps.RequestTransform.html#matchReplacePath" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>match<wbr/>Replace<wbr/>Path?</span></a>
<a href="requestSteps.RequestTransform.html#matchReplaceQuery" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>match<wbr/>Replace<wbr/>Query?</span></a>
<a href="requestSteps.RequestTransform.html#patchJsonBody" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>patch<wbr/>Json<wbr/>Body?</span></a>
<a href="requestSteps.RequestTransform.html#replaceBody" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>replace<wbr/>Body?</span></a>
<a href="requestSteps.RequestTransform.html#replaceBodyFromFile" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>replace<wbr/>Body<wbr/>From<wbr/>File?</span></a>
<a href="requestSteps.RequestTransform.html#replaceHeaders" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>replace<wbr/>Headers?</span></a>
<a href="requestSteps.RequestTransform.html#replaceHost" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>replace<wbr/>Host?</span></a>
<a href="requestSteps.RequestTransform.html#replaceMethod" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>replace<wbr/>Method?</span></a>
<a href="requestSteps.RequestTransform.html#setProtocol" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>set<wbr/>Protocol?</span></a>
<a href="requestSteps.RequestTransform.html#updateHeaders" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>update<wbr/>Headers?</span></a>
<a href="requestSteps.RequestTransform.html#updateJsonBody" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>update<wbr/>Json<wbr/>Body?</span></a>
</div></section></div></details></section></section><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Properties"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Properties</h2></summary><section><section class="tsd-panel tsd-member"><a id="matchReplaceBody" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>match<wbr/>Replace<wbr/>Body</span><a href="#matchReplaceBody" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">match<wbr/>Replace<wbr/>Body</span><span class="tsd-signature-symbol">?:</span> <a href="../types/MatchReplacePairs.html" class="tsd-signature-type tsd-kind-type-alias">MatchReplacePairs</a></div><div class="tsd-comment tsd-typography"><p>Perform a series of string match &amp; replace operations on the request body.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/requests/request-step-definitions.ts#L603">rules/requests/request-step-definitions.ts:603</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-inherited"><a id="matchReplaceHost" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>match<wbr/>Replace<wbr/>Host</span><a href="#matchReplaceHost" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">match<wbr/>Replace<wbr/>Host</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">{ </span><br/><span>    </span><span class="tsd-kind-property">replacements</span><span class="tsd-signature-symbol">: </span><a href="../types/MatchReplacePairs.html" class="tsd-signature-type tsd-kind-type-alias">MatchReplacePairs</a><span class="tsd-signature-symbol">; </span><br/><span>    </span><span class="tsd-kind-property">updateHostHeader</span><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">; </span><br/><span class="tsd-signature-symbol">}</span></div><div class="tsd-comment tsd-typography"><p>Perform a series of string match &amp; replace operations on the request host.</p>
<p>This cannot be combined with replaceHost.</p>
<p>If updateHostHeader is true, the Host (or :authority for HTTP/2+) header
will be updated automatically to match. If updateHostHeader is a string,
that will be used directly as the header value. If it's false no change
will be made. If not specified this defaults to true.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="PassThroughInitialTransforms.html">PassThroughInitialTransforms</a>.<a href="PassThroughInitialTransforms.html#matchReplaceHost">matchReplaceHost</a></p><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/passthrough-handling-definitions.ts#L155">rules/passthrough-handling-definitions.ts:155</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-inherited"><a id="matchReplacePath" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>match<wbr/>Replace<wbr/>Path</span><a href="#matchReplacePath" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">match<wbr/>Replace<wbr/>Path</span><span class="tsd-signature-symbol">?:</span> <a href="../types/MatchReplacePairs.html" class="tsd-signature-type tsd-kind-type-alias">MatchReplacePairs</a></div><div class="tsd-comment tsd-typography"><p>Perform a series of string match &amp; replace operations on the request path.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="PassThroughInitialTransforms.html">PassThroughInitialTransforms</a>.<a href="PassThroughInitialTransforms.html#matchReplacePath">matchReplacePath</a></p><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/passthrough-handling-definitions.ts#L160">rules/passthrough-handling-definitions.ts:160</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-inherited"><a id="matchReplaceQuery" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>match<wbr/>Replace<wbr/>Query</span><a href="#matchReplaceQuery" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">match<wbr/>Replace<wbr/>Query</span><span class="tsd-signature-symbol">?:</span> <a href="../types/MatchReplacePairs.html" class="tsd-signature-type tsd-kind-type-alias">MatchReplacePairs</a></div><div class="tsd-comment tsd-typography"><p>Perform a series of string match &amp; replace operations on the request query string.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="PassThroughInitialTransforms.html">PassThroughInitialTransforms</a>.<a href="PassThroughInitialTransforms.html#matchReplaceQuery">matchReplaceQuery</a></p><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/passthrough-handling-definitions.ts#L165">rules/passthrough-handling-definitions.ts:165</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="patchJsonBody" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>patch<wbr/>Json<wbr/>Body</span><a href="#patchJsonBody" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">patch<wbr/>Json<wbr/>Body</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">Operation</span><span class="tsd-signature-symbol">[]</span></div><div class="tsd-comment tsd-typography"><p>A series of operations to apply to the request body in JSON Patch format (RFC
6902).</p>
<p>Any requests which are received with an invalid JSON body that match this rule
will fail.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/requests/request-step-definitions.ts#L598">rules/requests/request-step-definitions.ts:598</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="replaceBody" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>replace<wbr/>Body</span><a href="#replaceBody" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">replace<wbr/>Body</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">Uint8Array</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">Buffer</span></div><div class="tsd-comment tsd-typography"><p>A string or buffer that replaces the request body entirely.</p>
<p>If this is specified, the upstream request will not wait for the original request
body, so this may make responses faster than they would be otherwise given large
request bodies or slow/streaming clients.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/requests/request-step-definitions.ts#L566">rules/requests/request-step-definitions.ts:566</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="replaceBodyFromFile" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>replace<wbr/>Body<wbr/>From<wbr/>File</span><a href="#replaceBodyFromFile" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">replace<wbr/>Body<wbr/>From<wbr/>File</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><div class="tsd-comment tsd-typography"><p>The path to a file, which will be used to replace the request body entirely. The
file will be re-read for each request, so the body will always reflect the latest
file contents.</p>
<p>If this is specified, the upstream request will not wait for the original request
body, so this may make responses faster than they would be otherwise given large
request bodies or slow/streaming clients.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/requests/request-step-definitions.ts#L577">rules/requests/request-step-definitions.ts:577</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="replaceHeaders" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>replace<wbr/>Headers</span><a href="#replaceHeaders" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">replace<wbr/>Headers</span><span class="tsd-signature-symbol">?:</span> <a href="Headers.html" class="tsd-signature-type tsd-kind-interface">Headers</a></div><div class="tsd-comment tsd-typography"><p>A headers object which will completely replace the real request headers.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/requests/request-step-definitions.ts#L557">rules/requests/request-step-definitions.ts:557</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-inherited"><a id="replaceHost" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>replace<wbr/>Host</span><a href="#replaceHost" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">replace<wbr/>Host</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">{ </span><br/><span>    </span><span class="tsd-kind-property">targetHost</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><span class="tsd-kind-property">updateHostHeader</span><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">; </span><br/><span class="tsd-signature-symbol">}</span></div><div class="tsd-comment tsd-typography"><p>Replace the request host with a single fixed value, effectively forwarding
all requests to a different hostname.</p>
<p>This cannot be combined with matchReplaceHost.</p>
<p>If updateHostHeader is true, the Host (or :authority for HTTP/2+) header
will be updated automatically to match. If updateHostHeader is a string,
that will be used directly as the header value. If it's false no change
will be made. If not specified this defaults to true.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="PassThroughInitialTransforms.html">PassThroughInitialTransforms</a>.<a href="PassThroughInitialTransforms.html#replaceHost">replaceHost</a></p><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/passthrough-handling-definitions.ts#L143">rules/passthrough-handling-definitions.ts:143</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="replaceMethod" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>replace<wbr/>Method</span><a href="#replaceMethod" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">replace<wbr/>Method</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><div class="tsd-comment tsd-typography"><p>A replacement HTTP method. Case insensitive.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/requests/request-step-definitions.ts#L546">rules/requests/request-step-definitions.ts:546</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="setProtocol" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>set<wbr/>Protocol</span><a href="#setProtocol" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">set<wbr/>Protocol</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">&quot;http&quot;</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">&quot;https&quot;</span></div><div class="tsd-comment tsd-typography"><p>Override the request protocol. If replaceHost &amp; matchReplaceHost are not specified
and the URL no explicitly specified port, this will automatically switch to the
appropriate port (e.g. from 80 to 443).</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/requests/request-step-definitions.ts#L541">rules/requests/request-step-definitions.ts:541</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="updateHeaders" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>update<wbr/>Headers</span><a href="#updateHeaders" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">update<wbr/>Headers</span><span class="tsd-signature-symbol">?:</span> <a href="Headers.html" class="tsd-signature-type tsd-kind-interface">Headers</a></div><div class="tsd-comment tsd-typography"><p>A headers object which will be merged with the real request headers to add or
replace values. Headers with undefined values will be removed.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/requests/request-step-definitions.ts#L552">rules/requests/request-step-definitions.ts:552</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="updateJsonBody" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>update<wbr/>Json<wbr/>Body</span><a href="#updateJsonBody" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">update<wbr/>Json<wbr/>Body</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">{ </span><br/><span>    </span>[<span class="tsd-kind-index-signature">key</span>: <span class="tsd-signature-type">string</span>]<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">; </span><br/><span class="tsd-signature-symbol">}</span></div><div class="tsd-comment tsd-typography"><p>A JSON object which will be merged with the real request body. Undefined values
will be removed, and other values will be merged directly with the target value
recursively.</p>
<p>Any requests which are received with an invalid JSON body that match this rule
will fail.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/requests/request-step-definitions.ts#L587">rules/requests/request-step-definitions.ts:587</a></li></ul></aside></section></section></details></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="tsd-otp-Properties"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Properties</summary><div><a href="#matchReplaceBody" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>match<wbr/>Replace<wbr/>Body</span></a><a href="#matchReplaceHost" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>match<wbr/>Replace<wbr/>Host</span></a><a href="#matchReplacePath" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>match<wbr/>Replace<wbr/>Path</span></a><a href="#matchReplaceQuery" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>match<wbr/>Replace<wbr/>Query</span></a><a href="#patchJsonBody" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>patch<wbr/>Json<wbr/>Body</span></a><a href="#replaceBody" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>replace<wbr/>Body</span></a><a href="#replaceBodyFromFile" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>replace<wbr/>Body<wbr/>From<wbr/>File</span></a><a href="#replaceHeaders" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>replace<wbr/>Headers</span></a><a href="#replaceHost" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>replace<wbr/>Host</span></a><a href="#replaceMethod" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>replace<wbr/>Method</span></a><a href="#setProtocol" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>set<wbr/>Protocol</span></a><a href="#updateHeaders" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>update<wbr/>Headers</span></a><a href="#updateJsonBody" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>update<wbr/>Json<wbr/>Body</span></a></div></details></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>mockttp</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
