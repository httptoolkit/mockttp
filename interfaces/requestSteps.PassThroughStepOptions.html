<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>PassThroughStepOptions | mockttp</title><meta name="description" content="Documentation for mockttp"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">mockttp</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">mockttp</a></li><li><a href="../modules/requestSteps.html">requestSteps</a></li><li><a href="requestSteps.PassThroughStepOptions.html">PassThroughStepOptions</a></li></ul><h1>Interface PassThroughStepOptions</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p>This defines the upstream connection parameters. These passthrough parameters
are shared between both WebSocket &amp; Request passthrough rules.</p>
</div><div class="tsd-comment tsd-typography"></div></section><div class="tsd-signature"><span class="tsd-signature-keyword">interface </span><span class="tsd-kind-interface">PassThroughStepOptions</span> <span class="tsd-signature-symbol">{ </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.PassThroughStepOptions.html#additionalTrustedCAs">additionalTrustedCAs</a><span class="tsd-signature-symbol">?: </span><a href="../types/CADefinition.html" class="tsd-signature-type tsd-kind-type-alias">CADefinition</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.PassThroughStepOptions.html#beforeRequest">beforeRequest</a><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">req</span><span class="tsd-signature-symbol">: </span><a href="CompletedRequest.html" class="tsd-signature-type tsd-kind-interface">CompletedRequest</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">MaybePromise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol"> | </span><a href="requestSteps.CallbackRequestResult.html" class="tsd-signature-type tsd-kind-interface">CallbackRequestResult</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.PassThroughStepOptions.html#beforeResponse">beforeResponse</a><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">res</span><span class="tsd-signature-symbol">: </span><a href="requestSteps.PassThroughResponse.html" class="tsd-signature-type tsd-kind-interface">PassThroughResponse</a>, <span class="tsd-kind-parameter">req</span><span class="tsd-signature-symbol">: </span><a href="CompletedRequest.html" class="tsd-signature-type tsd-kind-interface">CompletedRequest</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">MaybePromise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol"> | </span><a href="../types/requestSteps.CallbackResponseResult.html" class="tsd-signature-type tsd-kind-type-alias">CallbackResponseResult</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.PassThroughStepOptions.html#clientCertificateHostMap">clientCertificateHostMap</a><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-symbol">{ </span><br/><span>        </span>[<span class="tsd-kind-index-signature">host</span>: <span class="tsd-signature-type">string</span>]<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">{ </span><br/><span>            </span><span class="tsd-kind-property">passphrase</span><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span><br/><span>            </span><span class="tsd-kind-property">pfx</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Buffer</span><span class="tsd-signature-symbol">; </span><br/><span>        </span><span class="tsd-signature-symbol">}</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><span class="tsd-signature-symbol">}</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.PassThroughStepOptions.html#ignoreHostHttpsErrors">ignoreHostHttpsErrors</a><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.PassThroughStepOptions.html#lookupOptions">lookupOptions</a><span class="tsd-signature-symbol">?: </span><a href="PassThroughLookupOptions.html" class="tsd-signature-type tsd-kind-interface">PassThroughLookupOptions</a><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.PassThroughStepOptions.html#proxyConfig">proxyConfig</a><span class="tsd-signature-symbol">?: </span><a href="../types/ProxyConfig.html" class="tsd-signature-type tsd-kind-type-alias">ProxyConfig</a><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.PassThroughStepOptions.html#simulateConnectionErrors">simulateConnectionErrors</a><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.PassThroughStepOptions.html#transformRequest">transformRequest</a><span class="tsd-signature-symbol">?: </span><a href="requestSteps.RequestTransform.html" class="tsd-signature-type tsd-kind-interface">RequestTransform</a><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="requestSteps.PassThroughStepOptions.html#transformResponse">transformResponse</a><span class="tsd-signature-symbol">?: </span><a href="requestSteps.ResponseTransform.html" class="tsd-signature-type tsd-kind-interface">ResponseTransform</a><span class="tsd-signature-symbol">; </span><br/><span class="tsd-signature-symbol">}</span></div><section class="tsd-panel tsd-hierarchy"><h4>Hierarchy (<a href="../hierarchy.html#requestSteps.PassThroughStepOptions">view full</a>)</h4><ul class="tsd-hierarchy"><li><a href="PassThroughStepConnectionOptions.html" class="tsd-signature-type tsd-kind-interface">PassThroughStepConnectionOptions</a><ul class="tsd-hierarchy"><li><span class="target">PassThroughStepOptions</span></li></ul></li></ul></section><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/requests/request-step-definitions.ts#L472">rules/requests/request-step-definitions.ts:472</a></li></ul></aside><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><details class="tsd-index-content tsd-accordion" open><summary class="tsd-accordion-summary tsd-index-summary"><h5 class="tsd-index-heading uppercase" role="button" aria-expanded="false" tabIndex="0"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-chevronSmall"></use></svg> Index</h5></summary><div class="tsd-accordion-details"><section class="tsd-index-section"><h3 class="tsd-index-heading">Properties</h3><div class="tsd-index-list"><a href="requestSteps.PassThroughStepOptions.html#additionalTrustedCAs" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>additional<wbr/>TrustedCAs?</span></a>
<a href="requestSteps.PassThroughStepOptions.html#beforeRequest" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>before<wbr/>Request?</span></a>
<a href="requestSteps.PassThroughStepOptions.html#beforeResponse" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>before<wbr/>Response?</span></a>
<a href="requestSteps.PassThroughStepOptions.html#clientCertificateHostMap" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>client<wbr/>Certificate<wbr/>Host<wbr/>Map?</span></a>
<a href="requestSteps.PassThroughStepOptions.html#ignoreHostHttpsErrors" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>ignore<wbr/>Host<wbr/>Https<wbr/>Errors?</span></a>
<a href="requestSteps.PassThroughStepOptions.html#lookupOptions" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>lookup<wbr/>Options?</span></a>
<a href="requestSteps.PassThroughStepOptions.html#proxyConfig" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>proxy<wbr/>Config?</span></a>
<a href="requestSteps.PassThroughStepOptions.html#simulateConnectionErrors" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>simulate<wbr/>Connection<wbr/>Errors?</span></a>
<a href="requestSteps.PassThroughStepOptions.html#transformRequest" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>transform<wbr/>Request?</span></a>
<a href="requestSteps.PassThroughStepOptions.html#transformResponse" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>transform<wbr/>Response?</span></a>
</div></section></div></details></section></section><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Properties"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Properties</h2></summary><section><section class="tsd-panel tsd-member tsd-is-inherited"><a id="additionalTrustedCAs" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>additional<wbr/>TrustedCAs</span><a href="#additionalTrustedCAs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">additional<wbr/>TrustedCAs</span><span class="tsd-signature-symbol">?:</span> <a href="../types/CADefinition.html" class="tsd-signature-type tsd-kind-type-alias">CADefinition</a><span class="tsd-signature-symbol">[]</span></div><div class="tsd-comment tsd-typography"><p>An array of additional certificates, which should be trusted as certificate
authorities for upstream hosts, in addition to Node.js's built-in certificate
authorities.</p>
<p>Each certificate should be an object with either a <code>cert</code> key and a string
or buffer value containing the PEM certificate, or a <code>certPath</code> key and a
string value containing the local path to the PEM certificate.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="PassThroughStepConnectionOptions.html">PassThroughStepConnectionOptions</a>.<a href="PassThroughStepConnectionOptions.html#additionalTrustedCAs">additionalTrustedCAs</a></p><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/passthrough-handling-definitions.ts#L67">rules/passthrough-handling-definitions.ts:67</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="beforeRequest" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>before<wbr/>Request</span><a href="#beforeRequest" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">before<wbr/>Request</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">req</span><span class="tsd-signature-symbol">: </span><a href="CompletedRequest.html" class="tsd-signature-type tsd-kind-interface">CompletedRequest</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">MaybePromise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol"> | </span><a href="requestSteps.CallbackRequestResult.html" class="tsd-signature-type tsd-kind-interface">CallbackRequestResult</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">)</span></div><div class="tsd-comment tsd-typography"><p>A callback that will be passed the full request before it is passed through,
and which returns an object that defines how the the request content should
be transformed before it's passed to the upstream server.</p>
<p>The callback can return an object to define how the request should be changed.
All fields on the object are optional, and returning undefined is equivalent
to returning an empty object (transforming nothing).</p>
<p>See <a href="requestSteps.CallbackRequestResult.html" class="tsd-kind-interface">CallbackRequestResult</a> for the possible fields that can be set.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/requests/request-step-definitions.ts#L514">rules/requests/request-step-definitions.ts:514</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="beforeResponse" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>before<wbr/>Response</span><a href="#beforeResponse" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">before<wbr/>Response</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">res</span><span class="tsd-signature-symbol">: </span><a href="requestSteps.PassThroughResponse.html" class="tsd-signature-type tsd-kind-interface">PassThroughResponse</a>, <span class="tsd-kind-parameter">req</span><span class="tsd-signature-symbol">: </span><a href="CompletedRequest.html" class="tsd-signature-type tsd-kind-interface">CompletedRequest</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">MaybePromise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol"> | </span><a href="../types/requestSteps.CallbackResponseResult.html" class="tsd-signature-type tsd-kind-type-alias">CallbackResponseResult</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">)</span></div><div class="tsd-comment tsd-typography"><p>A callback that will be passed the full response before it is passed through,
and which returns a value that defines how the the response content should
be transformed before it's returned to the client. The callback is also passed
the request that was sent to the server (as a 2nd parameter) for reference.</p>
<p>The callback can either return an object to define how the response should be
changed, or the strings 'close' or 'reset' to immediately close/reset the
underlying connection.</p>
<p>All fields on the object are optional, and returning undefined is equivalent
to returning an empty object (transforming nothing).</p>
<p>See <a href="requestSteps.CallbackResponseMessageResult.html" class="tsd-kind-interface">CallbackResponseMessageResult</a> for the possible fields that can be set.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/requests/request-step-definitions.ts#L531">rules/requests/request-step-definitions.ts:531</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-inherited"><a id="clientCertificateHostMap" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>client<wbr/>Certificate<wbr/>Host<wbr/>Map</span><a href="#clientCertificateHostMap" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">client<wbr/>Certificate<wbr/>Host<wbr/>Map</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">{ </span><br/><span>    </span>[<span class="tsd-kind-index-signature">host</span>: <span class="tsd-signature-type">string</span>]<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">{ </span><br/><span>        </span><span class="tsd-kind-property">passphrase</span><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span><br/><span>        </span><span class="tsd-kind-property">pfx</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Buffer</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><span class="tsd-signature-symbol">}</span><span class="tsd-signature-symbol">; </span><br/><span class="tsd-signature-symbol">}</span></div><div class="tsd-comment tsd-typography"><p>A mapping of hosts to client certificates to use, in the form of
<code>{ key, cert }</code> objects (none, by default). <code>*</code> can be used as a wildcard
to send a client certificate for all hosts that request it. If a wildcard
is present, specific hostname matches will still take precendence.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="PassThroughStepConnectionOptions.html">PassThroughStepConnectionOptions</a>.<a href="PassThroughStepConnectionOptions.html#clientCertificateHostMap">clientCertificateHostMap</a></p><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/passthrough-handling-definitions.ts#L75">rules/passthrough-handling-definitions.ts:75</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-inherited"><a id="ignoreHostHttpsErrors" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>ignore<wbr/>Host<wbr/>Https<wbr/>Errors</span><a href="#ignoreHostHttpsErrors" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">ignore<wbr/>Host<wbr/>Https<wbr/>Errors</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span></div><div class="tsd-comment tsd-typography"><p>A list of hostnames for which server certificate and TLS version errors
should be ignored (none, by default).</p>
<p>If set to 'true', HTTPS errors will be ignored for all hosts. WARNING:
Use this at your own risk. Setting this to <code>true</code> can open your
application to MITM attacks and should never be used over any network
that is not completed trusted end-to-end.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="PassThroughStepConnectionOptions.html">PassThroughStepConnectionOptions</a>.<a href="PassThroughStepConnectionOptions.html#ignoreHostHttpsErrors">ignoreHostHttpsErrors</a></p><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/passthrough-handling-definitions.ts#L56">rules/passthrough-handling-definitions.ts:56</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-inherited"><a id="lookupOptions" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>lookup<wbr/>Options</span><a href="#lookupOptions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">lookup<wbr/>Options</span><span class="tsd-signature-symbol">?:</span> <a href="PassThroughLookupOptions.html" class="tsd-signature-type tsd-kind-interface">PassThroughLookupOptions</a></div><div class="tsd-comment tsd-typography"><p>Custom DNS options, to allow configuration of the resolver used
when forwarding requests upstream. Passing any option switches
from using node's default dns.lookup function to using the
cacheable-lookup module, which will cache responses.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="PassThroughStepConnectionOptions.html">PassThroughStepConnectionOptions</a>.<a href="PassThroughStepConnectionOptions.html#lookupOptions">lookupOptions</a></p><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/passthrough-handling-definitions.ts#L103">rules/passthrough-handling-definitions.ts:103</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-inherited"><a id="proxyConfig" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>proxy<wbr/>Config</span><a href="#proxyConfig" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">proxy<wbr/>Config</span><span class="tsd-signature-symbol">?:</span> <a href="../types/ProxyConfig.html" class="tsd-signature-type tsd-kind-type-alias">ProxyConfig</a></div><div class="tsd-comment tsd-typography"><p>Upstream proxy configuration: pass through requests via this proxy.</p>
<p>If this is undefined, no proxy will be used. To configure a proxy
provide either:</p>
<ul>
<li>a ProxySettings object</li>
<li>a callback which will be called with an object containing the
hostname, and must return a ProxySettings object or undefined.</li>
<li>an array of ProxySettings or callbacks. The array will be
processed in order, and the first not-undefined ProxySettings
found will be used.</li>
</ul>
<p>When using a remote client, this parameter or individual array
values may be passed by reference, using the name of a rule
parameter configured in the admin server.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="PassThroughStepConnectionOptions.html">PassThroughStepConnectionOptions</a>.<a href="PassThroughStepConnectionOptions.html#proxyConfig">proxyConfig</a></p><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/passthrough-handling-definitions.ts#L95">rules/passthrough-handling-definitions.ts:95</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-inherited"><a id="simulateConnectionErrors" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>simulate<wbr/>Connection<wbr/>Errors</span><a href="#simulateConnectionErrors" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">simulate<wbr/>Connection<wbr/>Errors</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">boolean</span></div><div class="tsd-comment tsd-typography"><p>Whether to simulate connection errors back to the client.</p>
<p>By default when an upstream request fails outright a 502 &quot;Bad Gateway&quot;
response is sent to the downstream client, explicitly indicating the
failure and containing the error that caused the issue in the
response body.</p>
<p>When this option is set to <code>true</code>, low-level connection failures will
always trigger a downstream connection close/reset, rather than a 502
response.</p>
<p>This includes DNS failures, TLS connection errors, TCP connection resets,
etc (but not HTTP non-200 responses, which are still proxied as normal).
This is less convenient for debugging in a testing environment or when
using a proxy intentionally, but can be more accurate when trying to
transparently proxy network traffic, errors and all.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="PassThroughStepConnectionOptions.html">PassThroughStepConnectionOptions</a>.<a href="PassThroughStepConnectionOptions.html#simulateConnectionErrors">simulateConnectionErrors</a></p><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/passthrough-handling-definitions.ts#L123">rules/passthrough-handling-definitions.ts:123</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="transformRequest" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>transform<wbr/>Request</span><a href="#transformRequest" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">transform<wbr/>Request</span><span class="tsd-signature-symbol">?:</span> <a href="requestSteps.RequestTransform.html" class="tsd-signature-type tsd-kind-interface">RequestTransform</a></div><div class="tsd-comment tsd-typography"><p>A set of data to automatically transform a request. This includes properties
to support many transformation common use cases.</p>
<p>For advanced cases, a custom callback using beforeRequest can be used instead.
Using this field however where possible is typically simpler, more declarative,
and can be more performant. The two options are mutually exclusive: you cannot
use both transformRequest and a beforeRequest callback.</p>
<p>Only one transformation for each target (e.g. method, headers &amp; body) can be
specified. If more than one is specified then an error will be thrown when the
rule is registered.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Overrides <a href="PassThroughStepConnectionOptions.html">PassThroughStepConnectionOptions</a>.<a href="PassThroughStepConnectionOptions.html#transformRequest">transformRequest</a></p><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/requests/request-step-definitions.ts#L486">rules/requests/request-step-definitions.ts:486</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="transformResponse" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Optional</code><span>transform<wbr/>Response</span><a href="#transformResponse" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">transform<wbr/>Response</span><span class="tsd-signature-symbol">?:</span> <a href="requestSteps.ResponseTransform.html" class="tsd-signature-type tsd-kind-interface">ResponseTransform</a></div><div class="tsd-comment tsd-typography"><p>A set of data to automatically transform a response. This includes properties
to support many transformation common use cases.</p>
<p>For advanced cases, a custom callback using beforeResponse can be used instead.
Using this field however where possible is typically simpler, more declarative,
and can be more performant. The two options are mutually exclusive: you cannot
use both transformResponse and a beforeResponse callback.</p>
<p>Only one transformation for each target (status, headers &amp; body) can be
specified. If more than one is specified then an error will be thrown when the
rule is registered.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/2516d1d237f8822b9efd57556ca5cd439e1cb5c9/src/rules/requests/request-step-definitions.ts#L501">rules/requests/request-step-definitions.ts:501</a></li></ul></aside></section></section></details></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="tsd-otp-Properties"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Properties</summary><div><a href="#additionalTrustedCAs" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>additional<wbr/>TrustedCAs</span></a><a href="#beforeRequest" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>before<wbr/>Request</span></a><a href="#beforeResponse" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>before<wbr/>Response</span></a><a href="#clientCertificateHostMap" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>client<wbr/>Certificate<wbr/>Host<wbr/>Map</span></a><a href="#ignoreHostHttpsErrors" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>ignore<wbr/>Host<wbr/>Https<wbr/>Errors</span></a><a href="#lookupOptions" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>lookup<wbr/>Options</span></a><a href="#proxyConfig" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>proxy<wbr/>Config</span></a><a href="#simulateConnectionErrors" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>simulate<wbr/>Connection<wbr/>Errors</span></a><a href="#transformRequest" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>transform<wbr/>Request</span></a><a href="#transformResponse" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>transform<wbr/>Response</span></a></div></details></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>mockttp</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
